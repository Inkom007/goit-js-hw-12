{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst mainUrl = 'https://pixabay.com/api/';\n\nexport async function searchImg(query, page) {\n    const response = await axios(mainUrl, {\n        params: {\n            key: '43997530-fac9ffe50b9517751943b9e7a',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            page: page,\n            per_page: 15,\n        }\n    })\n    return response.data;\n}\n\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nexport function imagesGallery() {\n    let newLightBox = new SimpleLightbox('gallery, a', {\n        captionsData: 'alt',\n        captionDelay: 250\n    });\n    newLightBox.refresh();\n}\n\nexport function imgCreated(image) {\n    return `<li class=\"img-item\">\n    <a class=\"img-link\" href=\"${image.largeImageURL}\">\n    <img class=\"image\" src =\"${image.webformatURL}\" alt =\"${image.tags}\">\n    </a>\n    <div class=\"img-info\">\n    <p class=\"info\"><b>Likes</b>${image.likes}</p>\n    <p class=\"info\"><b>Views</b>${image.views}</p>\n    <p class=\"info\"><b>Comments</b>${image.comments}</p>\n    <p class=\"info\"><b>Downloads</b>${image.downloads}</p>\n    </div>\n    </li>`\n};\n\n export function imgTemplate(arr) {\n    return arr.map(imgCreated).join(\"\");\n};","import axios from 'axios';\nimport { searchImg } from './js/pixabay-api.js'\nimport { imgCreated } from \"./js/render-functions.js\";\nimport { imgTemplate } from \"./js/render-functions.js\";\nimport { imagesGallery } from \"./js/render-functions.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore = document.querySelector(\".btn-load-more\");\n\n\nform.addEventListener(\"submit\", handleSubmit);\nbtnLoadMore.addEventListener(\"click\", onLoadMore);\n\nlet page = 1;\nlet query = '';\n\n\nhideBtnLoadMore();\n\nfunction showLoader() {\n    loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n    loader.style.display = \"none\"\n}\n\nfunction showBtnLoadMore() {\n    btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideBtnLoadMore() {\n    btnLoadMore.classList.add('hidden');\n}\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    hideBtnLoadMore();\n    showLoader();\n\n  query = event.target.elements.query.value.trim();\n\n    \n   if (!query) {\n        hideLoader();\n        iziToast.error({\n            message: `Sorry, there are no images matching your search query.`,\n            messageColor: '#FAFAFB',\n            color: '#EF4040',\n            position: 'topRight'\n        });\n        return;\n    }\n   \n    try {\n      \n        const data = await searchImg(query, page);\n       \n        \n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: `Sorry, there are no images matching your search query.`,\n                messageColor: '#FAFAFB',\n                color: '#EF4040',\n                position: 'topRight'\n            })\n        }\n        else {\n            const markup = imgTemplate(data.hits);\n            gallery.innerHTML = markup;\n            imagesGallery();\n            showBtnLoadMore();\n        }\n    }\n\n    catch {\n            iziToast.error({\n                message: `Sorry, there are no images matching your search query.`,\n                messageColor: '#FAFAFB',\n                color: '#EF4040',\n                position: 'topRight'\n            });\n         \n        }\n           \n    finally {\n        event.target.reset();\n        hideLoader();\n    }\n}\n\n \n\nasync function onLoadMore() {\n    page += 1;\n    showLoader();\n   const data = await searchImg(query, page);\n    try {\n    \n            const markup = imgTemplate(data.hits);\n            gallery.insertAdjacentHTML(\"beforeend\", markup);\n            imagesGallery();\n        \n        if (page * data.hits.length >= data.totalHits) {\n            hideBtnLoadMore();\n             iziToast.info({\n            message: `We're sorry, but you've reached the end of search results.`,\n            position: 'topRight'\n        });\n        }\n\n        const card = document.querySelector(\".img-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight,\n            behavior: \"smooth\"\n        })\n        \n    }\n    catch (error) {\n        iziToast.info({\n            message: `We're sorry, but you've reached the end of search results.`,\n            position: 'topRight'\n        });\n    }\n    finally {\n        hideLoader();\n    }\n}\n\n\n"],"names":["mainUrl","searchImg","query","page","axios","imagesGallery","SimpleLightbox","imgCreated","image","imgTemplate","arr","form","gallery","loader","btnLoadMore","handleSubmit","onLoadMore","hideBtnLoadMore","showLoader","hideLoader","showBtnLoadMore","event","iziToast","data","markup","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,2BAET,eAAeC,EAAUC,EAAOC,EAAM,CAYzC,OAXiB,MAAMC,EAAMJ,EAAS,CAClC,OAAQ,CACJ,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACb,CACT,CAAK,GACe,IACpB,CCdgB,SAAS,cAAc,UAAU,EAE1C,SAASE,GAAgB,CACV,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GACtB,CAAK,EACW,QAAO,CACvB,CAEO,SAASC,EAAWC,EAAO,CAC9B,MAAO;AAAA,gCACqBA,EAAM,aAAa;AAAA,+BACpBA,EAAM,YAAY,WAAWA,EAAM,IAAI;AAAA;AAAA;AAAA,kCAGpCA,EAAM,KAAK;AAAA,kCACXA,EAAM,KAAK;AAAA,qCACRA,EAAM,QAAQ;AAAA,sCACbA,EAAM,SAAS;AAAA;AAAA,UAGrD,CAEQ,SAASC,EAAYC,EAAK,CAC9B,OAAOA,EAAI,IAAIH,CAAU,EAAE,KAAK,EAAE,CACtC,CCpBA,MAAMI,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAG3DH,EAAK,iBAAiB,SAAUI,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAU,EAEhD,IAAIb,EAAO,EACPD,EAAQ,GAGZe,IAEA,SAASC,GAAa,CAClBL,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASM,GAAa,CAClBN,EAAO,MAAM,QAAU,MAC3B,CAEA,SAASO,GAAkB,CACvBN,EAAY,UAAU,OAAO,QAAQ,CACzC,CAEA,SAASG,GAAkB,CACvBH,EAAY,UAAU,IAAI,QAAQ,CACtC,CAEA,eAAeC,EAAaM,EAAO,CAShC,GARCA,EAAM,eAAc,EACpBT,EAAQ,UAAY,GACpBK,IACAC,IAEFhB,EAAQmB,EAAM,OAAO,SAAS,MAAM,MAAM,OAGrC,CAACnB,EAAO,CACPiB,IACAG,EAAS,MAAM,CACX,QAAS,yDACT,aAAc,UACd,MAAO,UACP,SAAU,UACtB,CAAS,EACD,MACH,CAED,GAAI,CAEA,MAAMC,EAAO,MAAMtB,EAAUC,EAAOC,CAAI,EAIxC,GAAIoB,EAAK,KAAK,SAAW,EACrBD,EAAS,MAAM,CACX,QAAS,yDACT,aAAc,UACd,MAAO,UACP,SAAU,UAC1B,CAAa,MAEA,CACD,MAAME,EAASf,EAAYc,EAAK,IAAI,EACpCX,EAAQ,UAAYY,EACpBnB,IACAe,GACH,CACJ,MAEK,CACEE,EAAS,MAAM,CACX,QAAS,yDACT,aAAc,UACd,MAAO,UACP,SAAU,UAC1B,CAAa,CAEJ,QAEG,CACJD,EAAM,OAAO,QACbF,GACH,CACL,CAIA,eAAeH,GAAa,CACxBb,GAAQ,EACRe,IACD,MAAMK,EAAO,MAAMtB,EAAUC,EAAOC,CAAI,EACvC,GAAI,CAEI,MAAMqB,EAASf,EAAYc,EAAK,IAAI,EACpCX,EAAQ,mBAAmB,YAAaY,CAAM,EAC9CnB,IAEAF,EAAOoB,EAAK,KAAK,QAAUA,EAAK,YAChCN,IACCK,EAAS,KAAK,CACf,QAAS,6DACT,SAAU,UACtB,CAAS,GAID,MAAMG,EADO,SAAS,cAAc,WAAW,EACvB,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EACL,SAAU,QACtB,CAAS,CAEJ,MACa,CACVH,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UACtB,CAAS,CACJ,QACO,CACJH,GACH,CACL"}